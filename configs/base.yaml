# Base Configuration for XSP 0DTE Iron Condor

# --- Global Settings ---
ticker: "XSP"
timezone: "US/Eastern"
currency: "USD"
wing_width: 2.0  # Shared Wing Width for Scanner & Executor

# --- IBKR Connection Settings ---
ibkr:
  host: "127.0.0.1"
  paper_port: 7497    # Standard Paper Port
  live_port: 7497     # User specified 7497 for Live TWS
  client_id: 1
  timeout: 30

# --- Strategy Parameters ---
strategy:
  entry_time: "09:30"      # HH:MM (Market Open)
  target_delta: 0.10       # Target delta (OTM)
  width: 2.0               # Spread width (2-point wings)
  
  # Liquidity Gates
  min_credit: 0.20         # Minimum credit to enter (Increased for 2-wide)
  min_ror: 0.05            # Minimum Return on Risk
  max_spread_pct: 5.00     # Max relative spread
  max_spread_abs: 5.00     # Max absolute spread

# --- Exit Parameters ---
exit:
  take_profit_pct: 1.00    # Phase 1: hold winners to expiry (no active TP close)
  stop_loss_mult: 2.0      # Phase 1: tighter stop at 2x credit
  hold_duration_min: 45    # Max Hold 45 mins (Sniper)
  eod_time: "16:15"        # Force exit

# --- Simulation Settings ---
simulation:
  contract_multiplier: 100 # XSP Standard
  commission_per_leg: 0.65 # $0.65 per contract (IBKR)
  slippage_per_leg: 0.05   # 0.05 pts ($5.00) phantom slippage on exit
  max_daily_loss: 3000     # Kill Switch ($3k)
  capital: 100000          # Initial Capital for RoR ($100k)
  
# --- Data Settings ---
data:
  source: "parquet"
  data_path: "./data/raw"  # Placeholder
  dates:
    start: "2023-01-01"
    end: "2023-12-31"

# --- Risk Filters (FOMC/CPI/High Vol Days) ---
filters:
  min_vix: 10.0              # Skip days with VIX below this (low vol = poor premium)
  max_vix: 25.0              # KILL SWITCH: Skip days with VIX above 25.0 (extreme risk)
  start_time: "09:30"        # TIME GATE: No trading before 09:30 AM ET
  
risk:
  min_account_value: 1400.0  # HARD STOP: Si Equity < $1400, apagar sistema.

  exclude_dates:             # Blacklist dates (FOMC, CPI, NFP, etc.)
    - "2023-01-25"           # FOMC
    - "2023-02-01"           # FOMC
    - "2023-03-10"           # NFP
    - "2023-03-14"           # CPI
    - "2023-03-22"           # FOMC
    - "2023-05-03"           # FOMC
    - "2023-06-14"           # FOMC + CPI
    - "2023-07-26"           # FOMC
    - "2023-09-20"           # FOMC
    - "2023-11-01"           # FOMC
    - "2023-12-13"           # FOMC + CPI

# --- Optimization Grid (Default Ranges) ---
grid_search:
  target_delta: [0.05, 0.10, 0.15]
  width: [10, 20, 30]
  take_profit_pct: [0.25, 0.50]
  stop_loss_mult: [2.0, 3.0]
